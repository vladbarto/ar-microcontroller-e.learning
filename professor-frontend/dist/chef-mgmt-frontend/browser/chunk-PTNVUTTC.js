import{a as E,b as g,c as L,d as D,e as G,f as B,g as T,h as U,i as H,k as O,l as P,n as V}from"./chunk-GV5N5LA2.js";import{$ as N,A as a,D as y,E as x,G as F,J as n,K as o,L as b,N as C,O as j,S as s,U as w,ca as f,i as l,ia as M,j as c,ka as v,l as p,o as S,p as d,z as u}from"./chunk-VNHAHU5F.js";var k=(()=>{let t=class t{constructor(i){this.http=i}login(i){return this.http.post("auth/v1/login",i)}};t.\u0275fac=function(r){return new(r||t)(p(f))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var q=(()=>{let t=class t{constructor(i){this.http=i}getInfo(){return this.http.get("user/v1/info")}};t.\u0275fac=function(r){return new(r||t)(p(f))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function X(e,t){if(e&1&&(n(0,"div",9),s(1),o()),e&2){let z=j();u(),w(" ",z.errorMessage," ")}}var R=(()=>{let t=class t{constructor(i,r,m,I){this.formBuilder=i,this.authService=r,this.userService=m,this.router=I,this.loginForm=new G({})}ngOnInit(){this.buildLoginForm()}ngOnDestroy(){this.unsubscribeFromSubscribers()}buildLoginForm(){this.loginForm=this.formBuilder.group({email:["",[g.required,g.email]],password2:["",[g.required]]})}unsubscribeFromSubscribers(){this.loginSubscription?.unsubscribe(),this.getInfoSubscription?.unsubscribe()}login(){if(!this.loginForm?.valid){this.errorMessage="Invalid form completion!",setTimeout(()=>this.errorMessage=void 0,3e3);return}let i={email:this.loginForm?.get("email")?.value,password:this.loginForm?.get("password2")?.value};this.loginSubscription=this.authService.login(i).subscribe({next:()=>this.getUserInfo(),error:()=>this.errorMessage="Invalid credentials"})}getUserInfo(){this.getInfoSubscription=this.userService.getInfo().subscribe(i=>{sessionStorage.setItem("loggedUser",JSON.stringify(i)),this.router.navigateByUrl("/dashboard/chefs")})}};t.\u0275fac=function(r){return new(r||t)(a(H),a(k),a(q),a(M))},t.\u0275cmp=S({type:t,selectors:[["app-login"]],decls:18,vars:2,consts:[[1,"container","d-flex","justify-content-center","mt-5"],[1,"card","shadow-lg","w-50","p-2"],[1,"d-flex","justify-content-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","formControlName","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","password2","id","exampleInputPassword1",1,"form-control"],["role","alert",1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary"]],template:function(r,m){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),s(4,"Login"),o()(),n(5,"form",3),C("ngSubmit",function(){return m.login()}),n(6,"div",4)(7,"label",5),s(8,"Email address"),o(),b(9,"input",6),o(),n(10,"div",4)(11,"label",7),s(12,"Password"),o(),b(13,"input",8),o(),y(14,X,2,1,"div",9),n(15,"div",2)(16,"button",10),s(17,"Login"),o()()()()()),r&2&&(u(5),x("formGroup",m.loginForm),u(9),F(14,m.errorMessage?14:-1))},dependencies:[B,E,L,D,T,U]});let e=t;return e})();var Y=[{path:"login",component:R},{path:"**",component:P}],J=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=d({type:t}),t.\u0275inj=c({imports:[v.forChild(Y),v]});let e=t;return e})();var ct=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=d({type:t}),t.\u0275inj=c({imports:[N,J,V,O]});let e=t;return e})();export{ct as AuthenticationModule};
